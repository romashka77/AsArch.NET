@using AsArch.NET.EntityDataModel.Entytis
@using AsArch.NET.Models
@model NodeEditViewModels

@{
    ViewBag.Title = "Редактировать";
}

<h2>@ViewBag.Title</h2>
@if (Model.Id_itemtype == 1954)
{
    Html.RenderPartial("_editIskovoeZayvlenie", Model);
}
//else if (Model.Id_itemtype == 2286)
//{
//    Html.RenderPartial("_editPredmetIska", Model);
//}
else
{
    using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        <div class="form-horizontal">
            <h4>@Model.NameNode</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.Id_node)
            <div class="form-group">
                @*наименование*@
                @Html.LabelFor(model => model.NameNode, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.NameNode, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.NameNode, "", new { @class = "text-danger" })
                </div>
            </div>
            @*Список аребутов*@
            @foreach (var item in Model.Attrs)
            {

                switch ((item.Value as NodeAttr).IdAttrType)
                {
                    case 0:
                        Html.RenderPartial("_attrChar", (item.Value as NodeAttr));
                        break;
                    case 2:
                        Html.RenderPartial("_attrText", (item.Value as NodeAttr));
                        break;
                    case 3:
                        Model.IdAttr = (item.Value as NodeAttr).IdAttr;
                        Html.RenderPartial("_selectList", Model);
                        break;
                    case 4:
                        Html.RenderPartial("_attrDate", (item.Value as NodeAttr));
                        break;
                    case 11:
                        Html.RenderPartial("_attrFloat", (item.Value as NodeAttr));
                        break;
                    default:
                        Html.RenderPartial("_attrChar", (item.Value as NodeAttr));
                        break;
                }


            }
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Сохранить" class="btn btn-default itemtype" />
                </div>
            </div>
        </div>

    }
}
<div>
    @Html.ActionLink("Назад", "Index", new { id = 0 }, new { @class = "btn btn-default" })
</div>

@section Scripts
            {
    <script>
        $(function () {
            $('.itemtype').change(function () {
                $(this).closest('form').trigger('submit');
            })
        })
    </script>
}


@*@section Scripts
    {
        @Scripts.Render("~/bundles/jqueryval")
    }*@
